
import os, sys, glob
import json

from pyramid.response import Response

BaseDir = '/home/wayne/crcns'

def HdfFilename(dataset, experiment) :
    return BaseDir + '/' + dataset + '/' + experiment + '.hdf'

def GetStimulus(req) :
    print 'keys', req.GET.keys()
    dataset = req.GET.get('dataset')
    experiment = req.GET.get('experiment')
    time = req.GET.get('time')
    
    filename = HdfFilename(dataset, experiment)
    
    cmd = '%s/crcns_hdf.py --stimulus-image --filename %s --cur-ms %s' % (BaseDir, filename, time)
    data = os.popen(cmd).read()
    return Response(body=data, content_type='text/html')


    
